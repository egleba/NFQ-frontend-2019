{"version":3,"sources":["index.min.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","addedClient","list","clientNumber","window","onload","document","querySelector","focus","serviced","buttonRefresh","add","form","alertBoxes","findServiced","specialist","filtered","filter","clients","specialistAssigned","find","status","startTime","Date","timeServiced","findServicedAll","localStorage","setItem","JSON","stringify","getList","parse","getItem","number","alert","anyText","div","createElement","classList","innerHTML","appendChild","setTimeout","removeChild","remove","checkForLocalStorage","addEventListener","xhr","XMLHttpRequest","open","this","_list","responseText","send","event","output","value","push","concat","preventDefault"],"mappings":"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","file":"index.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\n// window.localStorage.clear();\nwindow.onload = function () {\n  document.querySelector(\"#focus\").focus();\n}; // -------- variables -------- //\n\n\nvar addedClient;\nvar list;\nvar clientNumber;\nvar buttonRefresh = document.querySelector(\"#buttonRefresh\");\nvar add = document.querySelector(\".form__wrapper\");\nvar form = document.querySelector(\"form\");\nvar alertBoxes = document.querySelector(\".alert-boxes\");\nvar alertBox = document.querySelector(\".alert-box\");\nvar serviced;\nvar spec1 = \"Specialistas 1\";\nvar spec2 = \"Specialistas 2\";\nvar spec3 = \"Specialistas 3\";\ncheckForLocalStorage(); // -------- change status of first client to \"serviced\" -------- //\n\nfunction findServiced(specialist) {\n  var filtered = list.filter(function (clients) {\n    return clients.specialistAssigned == specialist;\n  });\n  var filteredServiced = filtered.find(function (clients) {\n    return clients.status == \"serviced\";\n  });\n\n  if (!filteredServiced) {\n    serviced = filtered.find(function (clients) {\n      return clients.status == \"waiting\";\n    });\n  }\n\n  if (serviced) {\n    serviced.status = \"serviced\";\n    var startTime = new Date();\n    serviced.timeServiced = startTime;\n  }\n}\n\n; // -------- check if there is a client list in localStorage -------- //\n\nfunction checkForLocalStorage() {\n  if (localStorage.list) {\n    list = JSON.parse(localStorage.getItem('list'));\n    clientNumber = list[list.length - 1].number + 1;\n    buttonRefresh.classList.add(\"button--side\");\n    add.classList.remove(\"hidden\");\n  }\n\n  if (!localStorage.list) {\n    buttonRefresh.classList.remove(\"button--side\");\n    add.classList.add(\"hidden\");\n  }\n}\n\n; // -------- get dummy list -------- //\n\nbuttonRefresh.addEventListener(\"click\", function () {\n  var xhr = new XMLHttpRequest(); // xhr.open('GET', '../../dummyList.json', true)\n\n  xhr.open('GET', 'http://egleba.lt/nfq/dummyList.json', true);\n\n  xhr.onload = function () {\n    if (this.status === 200) {\n      var _list = JSON.parse(this.responseText);\n\n      localStorage.setItem('list', JSON.stringify(_list));\n      getList();\n      buttonRefresh.classList.add(\"button--side\");\n      add.classList.remove(\"hidden\");\n      findServicedAll();\n      alert(\"Pavyzdiniai duomenys sėkmingai įkrauti\");\n    } else {\n      alert(\"Nepavyko nuskaityti lankytojų duomenų\");\n    }\n  };\n\n  xhr.send();\n}); // -------- change status of all first clients to \"serviced\" -------- //\n\nfunction findServicedAll() {\n  findServiced(spec1);\n  findServiced(spec2);\n  findServiced(spec3);\n  localStorage.setItem('list', JSON.stringify(list));\n  getList();\n}\n\n; // -------- update client list from localStorage -------- //\n\nfunction getList() {\n  list = JSON.parse(localStorage.getItem('list'));\n  clientNumber = list[list.length - 1].number + 1;\n}\n\n; // -------- add new client -------- //\n\nform.addEventListener(\"submit\", function (event) {\n  var output = document.querySelector('input[name=\"radio\"]:checked').value;\n  addedClient = {\n    \"number\": clientNumber,\n    \"specialistAssigned\": output,\n    \"status\": \"waiting\",\n    \"timeServiced\": 0\n  };\n  list.push(addedClient);\n  findServicedAll();\n  localStorage.setItem('list', JSON.stringify(list));\n  alert(\"Lankytojas numeris \".concat(clientNumber, \" u\\u017Eregistruotas s\\u0117kmingai!\"));\n  event.preventDefault();\n}, false); // -------- alert -------- //\n\nfunction alert(anyText) {\n  var div = document.createElement(\"div\");\n  div.classList.add(\"alert-box\");\n  div.innerHTML = anyText;\n  alertBoxes.appendChild(div);\n  setTimeout(function () {\n    alertBoxes.removeChild(div);\n  }, 1950);\n}\n\n;\n\n},{}]},{},[1]);\n"]}